# Apache .htaccess for proxying contact form requests
# Place this in your web root directory

# Enable rewrite engine
RewriteEngine On

# Proxy contact form submissions to Hugo Contact server
RewriteRule ^f/contact$ http://127.0.0.1:8080/f/contact [P,L]

# Proxy form token script
RewriteRule ^form-token\.js$ http://127.0.0.1:8080/form-token.js [P,L]

# Add CORS headers for contact form
Header always set Access-Control-Allow-Origin "https://connexxo.com"
Header always set Access-Control-Allow-Methods "POST, OPTIONS"
Header always set Access-Control-Allow-Headers "Content-Type"
Header always set Access-Control-Max-Age "86400"

# Handle preflight OPTIONS requests
RewriteCond %{REQUEST_METHOD} OPTIONS
RewriteRule ^f/contact$ - [R=204,L]